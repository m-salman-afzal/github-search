(()=>{var e={};e.id=5,e.ids=[5],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},65203:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>h,routeModule:()=>d,tree:()=>l});var a=r(67096),s=r(16132),n=r(37284),i=r.n(n),o=r(32564),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let l=["",{children:["githubSearch",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,97028)),"/home/salman/work/github-search/src/app/githubSearch/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,79113)),"/home/salman/work/github-search/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],h=["/home/salman/work/github-search/src/app/githubSearch/page.tsx"],u="/githubSearch/page",p={require:r,loadChunk:()=>Promise.resolve()},d=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/githubSearch/page",pathname:"/githubSearch",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},90951:(e,t,r)=>{Promise.resolve().then(r.bind(r,14123))},14123:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>page});var a=r(30784),s=r(9885),n=r(72781),i=r(13214);let o="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",c={USERS:"users",REPOSITORIES:"repositories"},{Option:l}=i.default,selectAfter=e=>(0,a.jsxs)(i.default,{id:"search-type",defaultActiveFirstOption:!0,defaultValue:c.USERS,onChange:e.onSearchTypeChange,"aria-label":"search-type",children:[a.jsx(l,{value:c.USERS,children:"User"}),a.jsx(l,{value:c.REPOSITORIES,children:"Repo"})]}),GithubSearchComponent=e=>a.jsx(a.Fragment,{children:a.jsx(n.Z,{placeholder:"Start typing to search...",addonAfter:selectAfter(e),onChange:e.onSearchTextChange,id:"search-input"})});var h=r(94771),u=r(12618),p=r(24034),d=r(4568),g=r(81057),x=r(52451),b=r.n(x);let m=[,,,].fill(0),GithubCardComponent=e=>(0,a.jsxs)(a.Fragment,{children:[e.repositories.length>0&&a.jsx(u.Z,{gutter:{xs:8,sm:16,md:24,lg:32},justify:"center",children:e.repositories.map(t=>a.jsx(p.Z,{className:"gutter-row",children:(0,a.jsxs)(h.Z,{hoverable:!0,style:{width:240,margin:10},cover:a.jsx(b(),{alt:"example",src:`${e.searchType===c.REPOSITORIES?t?.owner?.avatar_url:t?.avatar_url}`,loading:"eager",width:240,height:240}),children:[e.searchType===c.REPOSITORIES&&(0,a.jsxs)(g.Z,{title:t.description&&t.description,children:[(0,a.jsxs)("p",{children:["Description:"," ",t.description?`${t.description.slice(0,30)}...`:" NA"]}),!t.description&&a.jsx("br",{})]}),(0,a.jsxs)("a",{href:`${t.html_url}`,target:"_blank",children:["Go to ",e.searchType===c.USERS?"Profile":"Repository"]})]},t.id)},t.id))}),e.loading&&a.jsx(u.Z,{gutter:{xs:8,sm:16,md:24,lg:32},justify:"center",children:m.map((t,r)=>a.jsx(h.Z,{hoverable:!0,loading:e.loading,style:{width:240,margin:10},children:a.jsx(d.default,{active:!0})},r))}),a.jsx("div",{id:"page-bottom-boundary",style:{height:5},ref:e.bottomBoundryRef})]}),getGithubRepositories=async e=>(await fetch(`https://api.github.com/search/repositories?q=${e.query}&per_page=${e.perPage??10}&page=${e.currentPage??1}`,{headers:{"X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${o}`}})).json(),getGithubUsers=async e=>(await fetch(`https://api.github.com/search/users?q=${e.query}&per_page=${e.perPage??10}&page=${e.currentPage??1}`,{headers:{"X-GitHub-Api-Version":"2022-11-28",Authorization:`Bearer ${o}`}})).json();var S=r(63569),y=r.n(S);let useDebounce=(e,t,r)=>(0,s.useCallback)(y()(t,e,{leading:!1,trailing:!0}),r),useInfiniteScroll=(e,t)=>{(0,s.useEffect)(()=>{let r=new IntersectionObserver(e);return r&&t.current&&r.observe(t.current),()=>{r&&r.disconnect()}})},f=[],GithubSearchContainer=()=>{let[e,t]=(0,s.useState)(c.USERS),[r,n]=(0,s.useState)(""),[i,o]=(0,s.useState)(f),[l,h]=(0,s.useState)(!1),[u,p]=(0,s.useState)(1),d=(0,s.useRef)(null);(0,s.useEffect)(()=>{let getData=async(e,t,r)=>{if(0===e.length){o(f),p(1);return}switch(t){case c.REPOSITORIES:{h(e=>!e);let t=await getGithubRepositories({query:e,currentPage:r});o(e=>e.concat(t.items)),h(e=>!e)}break;case c.USERS:{h(e=>!e);let t=await getGithubUsers({query:e,currentPage:u});o(e=>e.concat(t.items)),h(e=>!e)}}};r&&e&&getData(r,e,u)},[r,e,u]);let handleInputChange=async e=>{if(e.length<=3||0===e.length){o(f),p(1);return}o(f),p(1),n(e)},onSearchTypeChange=async e=>{t(e),handleInputChange(r)},debounceCallback=async e=>{handleInputChange(e.target.value)},g=useDebounce(1e3,debounceCallback,[r,e]),onIntersection=async e=>{let t=e[0];t.isIntersecting&&!l&&i.length>0&&p(e=>e+1)};return useInfiniteScroll(onIntersection,d),(0,a.jsxs)(a.Fragment,{children:[a.jsx(GithubSearchComponent,{onSearchTextChange:g,onSearchTypeChange:onSearchTypeChange}),a.jsx(GithubCardComponent,{repositories:i,searchType:e,loading:l,bottomBoundryRef:d})]})},page=()=>a.jsx(GithubSearchContainer,{})},97028:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>c});var a=r(95153);let s=(0,a.createProxy)(String.raw`/home/salman/work/github-search/src/app/githubSearch/page.tsx`),{__esModule:n,$$typeof:i}=s,o=s.default,c=o}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[472,430,623],()=>__webpack_exec__(65203));module.exports=r})();