(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{13789:function(e,t,n){Promise.resolve().then(n.bind(n,23185))},23185:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return page}});var r=n(57437),a=n(2265),i=n(43574),s=n(45623);let c="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",o={USERS:"users",REPOSITORIES:"repositories"},{Option:l}=s.default,selectAfter=e=>(0,r.jsxs)(s.default,{id:"search-type",defaultActiveFirstOption:!0,defaultValue:o.USERS,onChange:e.onSearchTypeChange,"aria-label":"search-type",children:[(0,r.jsx)(l,{value:o.USERS,children:"User"}),(0,r.jsx)(l,{value:o.REPOSITORIES,children:"Repo"})]}),GithubSearchComponent=e=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Z,{placeholder:"Start typing to search...",addonAfter:selectAfter(e),onChange:e.onSearchTextChange,id:"search-input"})});var u=n(28170),h=n(20020),d=n(18142),g=n(26782),p=n(82044),S=n(16691),b=n.n(S);let f=[,,,].fill(0),GithubCardComponent=e=>(0,r.jsxs)(r.Fragment,{children:[e.repositories.length>0&&(0,r.jsx)(h.Z,{gutter:{xs:8,sm:16,md:24,lg:32},justify:"center",children:e.repositories.map(t=>{var n;return(0,r.jsx)(d.Z,{className:"gutter-row",children:(0,r.jsxs)(u.Z,{hoverable:!0,style:{width:240,margin:10},cover:(0,r.jsx)(b(),{alt:"example",src:"".concat(e.searchType===o.REPOSITORIES?null==t?void 0:null===(n=t.owner)||void 0===n?void 0:n.avatar_url:null==t?void 0:t.avatar_url),loading:"eager",width:240,height:240}),children:[e.searchType===o.REPOSITORIES&&(0,r.jsxs)(p.Z,{title:t.description&&t.description,children:[(0,r.jsxs)("p",{children:["Description:"," ",t.description?"".concat(t.description.slice(0,30),"..."):" NA"]}),!t.description&&(0,r.jsx)("br",{})]}),(0,r.jsxs)("a",{href:"".concat(t.html_url),target:"_blank",children:["Go to ",e.searchType===o.USERS?"Profile":"Repository"]})]},t.id)},t.id)})}),e.loading&&(0,r.jsx)(h.Z,{gutter:{xs:8,sm:16,md:24,lg:32},justify:"center",children:f.map((t,n)=>(0,r.jsx)(u.Z,{hoverable:!0,loading:e.loading,style:{width:240,margin:10},children:(0,r.jsx)(g.default,{active:!0})},n))}),(0,r.jsx)("div",{id:"page-bottom-boundary",style:{height:5},ref:e.bottomBoundryRef})]}),getGithubRepositories=async e=>{var t,n;return(await fetch("https://api.github.com/".concat("search/repositories","?q=").concat(e.query,"&per_page=").concat(null!==(t=e.perPage)&&void 0!==t?t:10,"&page=").concat(null!==(n=e.currentPage)&&void 0!==n?n:1),{headers:{"X-GitHub-Api-Version":"2022-11-28",Authorization:"Bearer ".concat(c)}})).json()},getGithubUsers=async e=>{var t,n;return(await fetch("https://api.github.com/".concat("search/users","?q=").concat(e.query,"&per_page=").concat(null!==(t=e.perPage)&&void 0!==t?t:10,"&page=").concat(null!==(n=e.currentPage)&&void 0!==n?n:1),{headers:{"X-GitHub-Api-Version":"2022-11-28",Authorization:"Bearer ".concat(c)}})).json()};var y=n(81739),v=n.n(y);let useDebounce=(e,t,n)=>(0,a.useCallback)(v()(t,e,{leading:!1,trailing:!0}),n),useInfiniteScroll=(e,t)=>{(0,a.useEffect)(()=>{let n=new IntersectionObserver(e);return n&&t.current&&n.observe(t.current),()=>{n&&n.disconnect()}})},j=[],GithubSearchContainer=()=>{let[e,t]=(0,a.useState)(o.USERS),[n,i]=(0,a.useState)(""),[s,c]=(0,a.useState)(j),[l,u]=(0,a.useState)(!1),[h,d]=(0,a.useState)(1),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{let getData=async(e,t,n)=>{if(0===e.length){c(j),d(1);return}switch(t){case o.REPOSITORIES:{u(e=>!e);let t=await getGithubRepositories({query:e,currentPage:n});c(e=>e.concat(t.items)),u(e=>!e)}break;case o.USERS:{u(e=>!e);let t=await getGithubUsers({query:e,currentPage:h});c(e=>e.concat(t.items)),u(e=>!e)}}};n&&e&&getData(n,e,h)},[n,e,h]);let handleInputChange=async e=>{if(e.length<=3||0===e.length){c(j),d(1);return}c(j),d(1),i(e)},onSearchTypeChange=async e=>{t(e),handleInputChange(n)},debounceCallback=async e=>{handleInputChange(e.target.value)},p=useDebounce(1e3,debounceCallback,[n,e]),onIntersection=async e=>{let t=e[0];t.isIntersecting&&!l&&s.length>0&&d(e=>e+1)};return useInfiniteScroll(onIntersection,g),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(GithubSearchComponent,{onSearchTextChange:p,onSearchTypeChange:onSearchTypeChange}),(0,r.jsx)(GithubCardComponent,{repositories:s,searchType:e,loading:l,bottomBoundryRef:g})]})};var page=()=>(0,r.jsx)(GithubSearchContainer,{})}},function(e){e.O(0,[108,971,472,744],function(){return e(e.s=13789)}),_N_E=e.O()}]);